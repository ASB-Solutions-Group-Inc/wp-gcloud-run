# [START cloudbuild_basic_config]
steps:
  # Docker Build
  - name: 'gcr.io/cloud-builders/docker'
    args: ['pull', 'docker/dockerfile:experimental']
  - name: 'gcr.io/cloud-builders/docker'
    args: ['pull', 'docker/dockerfile:1.0-experimental']
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 
           'us-central1-docker.pkg.dev/wp-cloudrun-demo/my-docker-repo/wordpress:latest', 
           '.']
    env: 
      - "DOCKER_BUILDKIT=1"

  # Docker Push
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 
           'us-central1-docker.pkg.dev/wp-cloudrun-demo/my-docker-repo/wordpress:latest']

# [END cloudbuild_basic_config]